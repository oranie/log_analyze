あるcombinedフォーマットで出力されているapacheログを整形してDBに突っ込む為のスクリプト。
LogFormat "%{X-Forwarded-For}i %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %D" combined
この形式を想定。

整形後は
日時|メソッド|リソース|パラメータ|レスポンスコード|レスポンスデータ|レスポンスタイム|host_name|ServerID（大きな括りでとか)
という形式のレコード。
UAは整形が面倒だったのと、用途的にあんまり必要じゃなかったので省いた。
これで、どのリソースアクセスに対してどれくらいのレスポンスタイムが掛かったかとか調べる。

今はまだ恐いので、それぞれのplファイルを個別に動作させている。
少し運用して問題無ければ一つでコントロールさせる。


#ぶっちゃけ本番用のデータを一部消しているので、そのせいで上手く動かない場所があるかも。
